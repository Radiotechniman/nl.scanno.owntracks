{
   "id": "nl.scanno.owntracks",
   "name": {
      "en": "Owntracks Client",
      "nl": "Owntracks Client"
   },
   "description": {
      "en": "Subscripe to Owntracks MQTT messages for presence detection",
      "nl": "Abonneer op MQTT berichten van Owntracks voor aanwezigheids detectie"
   },
   "version": "1.0.3",
   "compatibility": "1.x",
   "category": [
      "internet",
      "localization"
   ],
   "permissions": [
       "homey:manager:speech-input",
       "homey:manager:speech-output"
   ],
   "speech": [
      {
          "id": "owntracks",
          "importance": 1,
          "triggers": {
             "en": [ "location" ],
             "nl": [ "locatie" ]
          }
      },
      {
         "id": "owntracks2",
         "importance": 0.5,
         "triggers": {
            "en": [ "where" ],
            "nl": [ "waar" ]
         }
      }
   ],
   "speechExamples": {
      "en": [ "What is the location of Menno?" ],
      "nl": [ "Wat is de locatie van Menno?" ]
   },
   "author": {
      "name": "Menno van Grinsven",
      "email": "mgrinsven@gmail.com"
   },
   "contributors": {
      "developers": [
         {
            "name": "Menno van Grinsven",
            "email": "mgrinsven@gmail.com"
         }
      ]
   },
   "images": {
      "large":"./assets/images/large.png",
      "small":"./assets/images/small.png"
   },
   "flow": {
      "conditions": [
         {
            "id": "inGeofence",
            "title": {
               "en": "Someone present in",
               "nl": "Persoon aanwezig in"
            },
            "args": [
               {
                  "name": "geoFence",
                  "type": "text",
                  "placeholder": {
                     "en": "Name of geoFence",
                     "nl": "Naam van de geoFence"
                  }
               }
            ]
         }
      ],

      "triggers": [
         {
            "id": "eventOwntracks",
            "title": {
               "en": "Receive Geofence triggers",
               "nl": "Ontvang Geofence triggers"
            },
            "tokens": [
               {
                  "name": "event",
                  "title": {
                     "en": "Type of event (enter or leave)",
                     "nl": "Type gebeurtenis (enter / leave)"
                  }
               },
               {
                  "name": "user",
                  "title": {
                     "en": "User that enters/leaves geofence",
                     "nl": "Gebruiker welke de geofence binnenkomt of verlaat"
                  }
               },
               {
                  "name": "fence",
                  "title": {
                     "en": "Name of geofence",
                     "nl": "Naam van de geofence"
                  }
               }
            ],
            "args": [
	              {
	                 "name": "mqttTopic",
	                 "type": "text",
	                 "placeholder": {
	                    "en": "Topic",
	                    "nl": "Topic"
	                 }
	              },
	              {
	                 "name": "nameGeofence",
	                 "type": "text",
	                 "placeholder": {
	                    "en": "Geofence name",
	                    "nl": "Naam Geofence"
	                 }
	              }
            ]
         },
         {
            "id": "enterGeofence",
            "title": {
               "en": "Enter Geofence trigger",
               "nl": "Geofence binnen gegaan trigger"
            },
            "tokens": [
               {
                  "name": "user",
                  "title": {
                     "en": "User that enters geofence",
                     "nl": "Gebruiker welke de geofence binnenkomt"
                  }
               },
               {
                  "name": "fence",
                  "title": {
                     "en": "Name of geofence",
                     "nl": "Naam van de geofence"
                  }
               }
            ],
            "args": [
	              {
	                 "name": "mqttTopic",
	                 "type": "text",
	                 "placeholder": {
	                    "en": "Topic",
	                    "nl": "Topic"
	                 }
	              },
	              {
	                 "name": "nameGeofence",
	                 "type": "text",
	                 "placeholder": {
	                    "en": "Geofence name",
	                    "nl": "Naam Geofence"
	                 }
	              }
            ]
         },
         {
            "id": "leaveGeofence",
            "title": {
               "en": "Leave Geofence trigger",
               "nl": "Geofence verlaten trigger"
            },
            "tokens": [
               {
                  "name": "user",
                  "title": {
                     "en": "User that enters geofence",
                     "nl": "Gebruiker welke de geofence binnenkomt"
                  }
               },
               {
                  "name": "fence",
                  "title": {
                     "en": "Name of geofence",
                     "nl": "Naam van de geofence"
                  }
               }
            ],
            "args": [
	              {
	                 "name": "mqttTopic",
	                 "type": "text",
	                 "placeholder": {
	                    "en": "Topic",
	                    "nl": "Topic"
	                 }
	              },
	              {
	                 "name": "nameGeofence",
	                 "type": "text",
	                 "placeholder": {
	                    "en": "Geofence name",
	                    "nl": "Naam Geofence"
	                 }
	              }
            ]
         },
         {
            "id": "eventBattery",
            "title": {
               "en": "Trigger when battery is below a certain percentage",
               "nl": "Trigger zodra accu lager dan een bepaald percentage is"
            },
            "tokens": [
               {
                  "name": "user",
                  "title": {
                     "en": "User of the device",
                     "nl": "Gebruiker van de telefoon."
                  }
               },
               {
                  "name": "battery",
                  "title": {
                     "en": "Battery percentage",
                     "nl": "Percentage van de accu"
                  }
               }
            ],
            "args": [
	             {
	                "name": "mqttTopic",
	                "type": "text",
	                "placeholder": {
	                   "en": "Topic",
	                   "nl": "Topic"
   	              }
	             },
 	             {
                  "name": "percBattery",
	                 "type": "number",
	                 "placeholder": {
	                    "en": "Trigger percentage",
	                    "nl": "Percentage accu voor trigger"
	                 }
	             }
            ]
         }
      ],
      "actions": [
         {
	           "id": "sayLocation",
	           "title": {
	              "en": "Tell the current location of a user",
	              "nl": "Vertel de huidige locatie van een gebruiker"
	            },
             "args": [
	               {
	                  "name": "user",
	                  "type": "text",
	                  "placeholder": {
	                     "en": "User",
	                     "nl": "Gebruiker"
	                   }
	               }
             ]
         },
         {
	           "id": "publishOwntracks",
	           "title": {
	              "en": "Publish message",
	              "nl": "Stuur bericht"
	           },
            "args": [
	              {
	                 "name": "mqttMessage",
	                 "type": "text",
	                 "placeholder": {
	                    "en": "Message",
	                    "nl": "Bericht"
	                 }
	              },
	              {
	                 "name": "mqttTopic",
	                 "type": "text",
	                 "placeholder": {
	                    "en": "Topic",
	                    "nl": "Topic"
	                 }
	              }
            ]
	        }
      ]
   }
}

